version: '2.0'
services:
  federation:
    container_name: federation-gateway
    image: federation-gateway:1.1.4-SNAPSHOT
    environment:
      SPRING_APPLICATION_JSON: '{
        "federation" : {
          "instance" : "gateway",
          "instance.name" : "ATT",
          "operator" : "d468656f-57d0-46e3-9f94-7ffa4f66dc03",
          "address" : "0.0.0.0",
          "server" : {
            "port" : 9002
          },
          "ssl" : {
            "key-store" : "/app/acumosr-test.pkcs12",
            "key-store-password" : "acumosr-test",
            "key-store-type" : "PKCS12",
   	        "key-password" : "acumosr-test",
     	      "trust-store" : "/app/acumosr-test-cacerts.jks",
            "trust-store-password" : "changeit"
         	}
        },
        "local" : {
          "address": "0.0.0.0",
          "server": {
            "port" : 9022
          },
          "ssl" : {
            "key-store" : "/app/acumosr-test.pkcs12",
            "key-store-password" : "acumosr-test",
            "key-store-type" : "PKCS12",
            "key-password" : "acumosr-test",
      	    "trust-store" : "/app/acumosr-test-cacerts.jks",
        	  "trust-store-password" : "changeit"
          }
        },
        "docker": {
          "host": "tcp://acumosr-test.research.att.com:4243",
          "config": "/docker_host/.docker",
          "registryUrl": "nexus.research.att.com:18004",
          "registryUsername": "snr_acumos_model_rw",
          "registryPassword": "password",
          "registryEmail": ""
        },
        "nexus": {
          "url": "http://nexus.research.att.com:8081/repository/repo_cognita_model_maven/",
          "proxy": "",
          "username": "snr_acumos_model_rw",
          "password": "password",
          "groupid": "com.artifact"
        },
        "peer": {
          "jobchecker": {
            "interval": 300
          }
        },
        "cdms" : {
          "client" : {
            "url": "http://acumosr-test.research.att.com:8000/ccds",
            "username": "ccds_client",
            "password": "ccds_client"
          }
        }
      }'
    expose:
      - "9002"
      - "9022"
    ports:
      - "9002:9002"
      - "9022:9022"
    volumes:
      - ./:/app
      - /var/run/docker.sock:/var/run/docker.sock
    logging:
      driver: json-file

