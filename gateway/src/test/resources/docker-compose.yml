version: '2.0'
services:
  federation:
    container_name: federation-gateway
    image: federation-gateway:1.1.0-SNAPSHOT
    environment:
      SPRING_APPLICATION_JSON: '{
        "federation" : {
          "instance" : "gateway",
          "instance.name" : "ATT",
          "operator" : "d468656f-57d0-46e3-9f94-7ffa4f66dc03",
          "address" : "0.0.0.0",
          "server" : {
            "port" : 9002
          },
          "ssl" : {
            "key-store" : "/app/acumosa.pkcs12",
            "key-store-password" : "acumosa",
            "key-store-type" : "PKCS12",
   	        "key-password" : "acumosa",
     	      "trust-store" : "/app/acumosTrustStore.jks",
            "trust-store-password" : "acumos"
         	}
        },
        "local" : {
          "address": "0.0.0.0",
          "server": {
            "port" : 9022
          },
          "ssl" : {
            "key-store" : "/app/acumosa.pkcs12",
            "key-store-password" : "acumosa",
            "key-store-type" : "PKCS12",
            "key-password" : "acumosa",
      	    "trust-store" : "/app/acumosTrustStore.jks",
        	  "trust-store-password" : "acumos"
          }
        },
        "nexus": {
          "url": "http://cognita-nexus01.eastus.cloudapp.azure.com:8081/repository/repo_cognita_model_maven/",
          "proxy": "",
          "password": "not4you",
          "username": "cognita_model_rw",
          "groupid": "com.artifact"
        },
        "peer": {
          "jobchecker": {
            "interval": 300
          }
        },
        "cdms" : {
          "client" : {
            "url": "http://mlp-cmn-data-svc:8000/ccds",
            "username": "ccds_client",
            "password": "ccds_client"
          }
        }
      }'
    expose:
      - "9002"
      - "9022"
    ports:
      - "9002:9002"
      - "9022:9022"
    volumes:
      - ./:/app
    logging:
      driver: json-file

