version: '2.0'
services:
  federation:
    container_name: federation-gateway
    image: federation-gateway:1.1.4-SNAPSHOT
    environment:
      SPRING_APPLICATION_JSON: '{
        "federation" : {
          "instance" : "gateway",
          "instance.name" : "ATT",
          "operator" : "user_uuid",
          "address" : "0.0.0.0",
          "server" : {
            "port" : 9084
          },
          "ssl" : {
            "key-store" : "/app/your_keystore.pkcs12",
            "key-store-password" : "keystore_password",
            "key-store-type" : "PKCS12",
   	        "key-password" : "key_password",
     	      "trust-store" : "/app/your_truststore.jks",
            "trust-store-password" : "changeit"
         	}
        },
        "local" : {
          "address": "0.0.0.0",
          "server": {
            "port" : 9884
          },
          "ssl" : {
            "key-store" : "/app/your_keystore.pkcs12",
            "key-store-password" : "keystore_password",
            "key-store-type" : "PKCS12",
            "key-password" : "key_password",
      	    "trust-store" : "/app/youro_truststore.jks",
        	  "trust-store-password" : "changeit"
          }
        },
        "docker": {
          "host": "tcp://your_host:port",
          "registryUrl": "your_registry:port",
          "registryUsername": "docker_username",
          "registryPassword": "docker_password",
          "registryEmail": ""
        },
        "nexus": {
          "url": "http://your_nexus:port/some_path/",
          "proxy": "",
          "username": "nexus_username",
          "password": "nexus_password",
          "groupid": "com.artifact"
        },
        "peer": {
          "jobchecker": {
            "interval": 300
          }
        },
        "cdms" : {
          "client" : {
            "url": "cds_reference",
            "username": "cds_username",
            "password": "cds_password"
          }
        }
      }'
    expose:
      - "9002"
      - "9022"
    ports:
      - "9002:9002"
      - "9022:9022"
    volumes:
      - ./:/app
      - /var/run/docker.sock:/var/run/docker.sock
    logging:
      driver: json-file

